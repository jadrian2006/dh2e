// DH2E animation keyframes
@keyframes dh2e-shake {
    0%, 100% { transform: translateX(0); }
    10% { transform: translateX(calc(-1 * var(--shake-intensity, 4px))); }
    20% { transform: translateX(var(--shake-intensity, 4px)); }
    30% { transform: translateX(calc(-0.8 * var(--shake-intensity, 4px))); }
    40% { transform: translateX(calc(0.8 * var(--shake-intensity, 4px))); }
    50% { transform: translateX(calc(-0.5 * var(--shake-intensity, 4px))); }
    60% { transform: translateX(calc(0.5 * var(--shake-intensity, 4px))); }
    70% { transform: translateX(calc(-0.3 * var(--shake-intensity, 4px))); }
    80% { transform: translateX(calc(0.3 * var(--shake-intensity, 4px))); }
    90% { transform: translateX(calc(-0.1 * var(--shake-intensity, 4px))); }
}

@keyframes dh2e-dice-spin {
    0% { transform: rotate(0deg) scale(1); }
    50% { transform: rotate(180deg) scale(1.2); }
    100% { transform: rotate(360deg) scale(1); }
}

@keyframes dh2e-slide-up {
    from { transform: translateY(20px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}

@keyframes dh2e-slide-down {
    from { transform: translateY(-20px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}

@keyframes dh2e-slide-left {
    from { transform: translateX(20px); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
}

@keyframes dh2e-slide-right {
    from { transform: translateX(-20px); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
}

@keyframes dh2e-pulse-glow {
    0% { box-shadow: 0 0 0 0 var(--glow-color, #c8a84e); }
    50% { box-shadow: 0 0 12px 4px var(--glow-color, #c8a84e); }
    100% { box-shadow: 0 0 0 0 var(--glow-color, #c8a84e); }
}

// Animation utility classes
.dh2e-shake { animation: dh2e-shake 0.4s ease-in-out; }
.dh2e-dice-roll { animation: dh2e-dice-spin 0.5s ease-out; }
.dh2e-slide-in-up { animation: dh2e-slide-up 0.3s ease-out; }
.dh2e-slide-in-down { animation: dh2e-slide-down 0.3s ease-out; }
.dh2e-slide-in-left { animation: dh2e-slide-left 0.3s ease-out; }
.dh2e-slide-in-right { animation: dh2e-slide-right 0.3s ease-out; }
.dh2e-pulse-glow { animation: dh2e-pulse-glow 0.6s ease-in-out; }

// DH2E global layout styles
.dh2e.sheet {
    background: var(--dh2e-bg-dark);
    color: var(--dh2e-text-primary);

    // Apply fonts only to window-content, not the window-header
    // which needs Font Awesome for control icons
    .window-content {
        font-family: var(--dh2e-font-body);
        font-size: var(--dh2e-text-md);
        padding: 0;
        overflow: hidden;
    }

    // Sheet header with dark bg
    .sheet-header {
        background: var(--dh2e-bg-darkest);
        border-bottom: 2px solid var(--dh2e-border-gold);
        padding: var(--dh2e-space-md);
    }

    // Sheet body with parchment panels
    .sheet-body {
        background: var(--dh2e-bg-mid);
        flex: 1;
        overflow-y: auto;
        padding: var(--dh2e-space-md);
    }

    // Parchment panel sections
    .panel {
        background: var(--dh2e-parchment);
        color: var(--dh2e-text-dark);
        border: 1px solid var(--dh2e-border);
        border-radius: var(--dh2e-radius-md);
        padding: var(--dh2e-space-md);
        box-shadow: var(--dh2e-shadow-sm);
    }

    // Gold dividers
    .divider {
        border: none;
        border-top: 1px solid var(--dh2e-gold-muted);
        margin: var(--dh2e-space-md) 0;
    }

    // Scrollbar styling
    ::-webkit-scrollbar {
        width: 6px;
    }
    ::-webkit-scrollbar-track {
        background: var(--dh2e-bg-darkest);
    }
    ::-webkit-scrollbar-thumb {
        background: var(--dh2e-gold-dark);
        border-radius: 3px;
    }
}

// Dialog windows (check dialog, fate dialog, creation wizard)
.dh2e.dialog {
    background: var(--dh2e-bg-dark);
    color: var(--dh2e-text-primary);
    font-family: var(--dh2e-font-body);

    .window-content {
        padding: 0;
        overflow: hidden;
    }

    ::-webkit-scrollbar {
        width: 6px;
    }
    ::-webkit-scrollbar-track {
        background: var(--dh2e-bg-darkest);
    }
    ::-webkit-scrollbar-thumb {
        background: var(--dh2e-gold-dark);
        border-radius: 3px;
    }
}

// Ensure FA icons work everywhere in DH2E apps (window headers, dialogs, sheets)
// Foundry V13 ships FA6 Pro â€” use the CSS variable with Pro fallback
.dh2e [class*="fa-"]::before {
    font-family: var(--fa-style-family, "Font Awesome 6 Pro"), "Font Awesome 6 Brands" !important;
    font-weight: inherit !important;
}

// Window header styling for all DH2E apps
.dh2e {
    .window-header {
        background: var(--dh2e-bg-darkest);
        border-bottom: 2px solid var(--dh2e-gold-dark);

        .window-title {
            font-family: var(--dh2e-font-header);
            color: var(--dh2e-gold);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            font-size: 0.85rem;
        }
    }
}
